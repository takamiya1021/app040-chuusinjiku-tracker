# データファイル管理ドキュメント

## 📁 記事データファイル一覧

### 本番使用ファイル

#### `public/articles.json` ⭐ **現在使用中**
- **内容**: 要約版記事データ（300-400文字/記事）
- **サイズ**: 1.1MB
- **記事数**: 899件（表示対象のみ）
- **用途**: アプリケーションが読み込むメインデータ
- **特徴**:
  - スマホで縦2ページ程度の読みやすさ
  - PCでスクロール不要
  - 読み込み速度が速い
- **更新日**: 2025-10-21 03:11

### バックアップファイル

#### `public/articles-fulltext.json` 💾 **全文版バックアップ**
- **内容**: 全文版記事データ（元データ）
- **サイズ**: 6.4MB
- **記事数**: 1,158件（全記事、非表示含む）
- **用途**:
  - 元データの保管
  - 全文版に戻す場合の復元元
- **特徴**:
  - 記事の完全な内容を保持
  - hidden フラグ付き記事も含む
- **作成日**: 2025-10-21 03:11

#### `public/articles-summary.json` 📄 **要約版コピー**
- **内容**: 要約版記事データ（articles.jsonと同一）
- **サイズ**: 1.1MB
- **記事数**: 899件
- **用途**: 要約版の予備コピー
- **作成日**: 2025-10-21 03:09

### 作業用一時ファイル

#### `public/articles-visible.json` 🔧 **作業用**
- **内容**: 表示対象記事の抽出データ
- **サイズ**: 5.8MB
- **記事数**: 899件（要約前のデータ）
- **用途**:
  - 要約処理の入力データ
  - 一時的な作業ファイル
- **削除可否**: 削除可能（作業完了後）
- **作成日**: 2025-10-21 00:41

#### `public/batch-*.json` (batch-0.json ~ batch-17.json) 🔧 **中間ファイル**
- **内容**: 要約処理の中間結果（50件ずつ）
- **個数**: 18ファイル
- **合計サイズ**: 約1.1MB
- **用途**:
  - バッチ処理の中間データ
  - トラブル時の部分リカバリ
- **削除可否**: 削除可能（articles-summary.json作成後）
- **作成日**: 2025-10-21 00:47-02:21

## 🔄 データファイルの切り替え方法

### 要約版 → 全文版に戻す場合
```bash
cp public/articles-fulltext.json public/articles.json
```

### 全文版 → 要約版に切り替える場合
```bash
cp public/articles-summary.json public/articles.json
```

## 📊 データ統計

| 項目 | 全文版 | 要約版 |
|------|--------|--------|
| ファイルサイズ | 6.4MB | 1.1MB |
| 総記事数 | 1,158件 | 899件 |
| 非表示記事 | 259件 | 0件 |
| 平均文字数/記事 | 約2,000文字 | 300-400文字 |
| 読み込み時間 | 遅い | 速い |

## 🗑️ クリーンアップ（任意）

作業が完全に完了し、要約版で問題がない場合は以下のファイルを削除可能：

```bash
# 一時ファイルの削除
rm public/articles-visible.json
rm public/batch-*.json
```

**注意**: バックアップファイル（articles-fulltext.json、articles-summary.json）は削除しないこと。

## 📝 更新履歴

### 2025-10-21
- 要約版データ作成（Gemini API使用、18バッチ処理）
- articles.jsonを要約版に切り替え
- articles-fulltext.jsonに全文版をバックアップ
- 非表示記事数: 259件
  - 通し番号指定: 16件
  - キーワード一致: 98件（会員サイト、ZOOM、応援隊、卒業生）
  - 追加指定: 4件

## ⚠️ 重要な注意事項

1. **articles.jsonを直接編集しない**
   - 編集する場合は必ず元ファイル（articles-fulltext.jsonまたはarticles-summary.json）を編集してからコピーする

2. **バックアップの保持**
   - articles-fulltext.jsonは必ず保持すること
   - 万が一全文版が必要になった場合の復元元

3. **記事の追加・編集時**
   - 全文版（articles-fulltext.json）に追加・編集
   - 要約が必要な場合は再度要約処理を実行
   - 最後にarticles.jsonを更新

4. **Git管理**
   - articles.json: コミット対象（本番データ）
   - articles-fulltext.json: コミット対象（バックアップ）
   - articles-summary.json: コミット対象（予備）
   - articles-visible.json: .gitignoreに追加（一時ファイル）
   - batch-*.json: .gitignoreに追加（一時ファイル）
